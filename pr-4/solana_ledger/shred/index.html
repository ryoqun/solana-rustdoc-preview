<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The `shred` module defines data structures and methods to pull MTU sized data frames from the network. There are two types of shreds: data and coding. Data shreds contain entry information while coding shreds provide redundancy to protect against dropped network packets (erasures)."><title>solana_ledger::shred - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="solana_ledger" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (1c42cb4ef 2023-04-26)" data-search-js="search-618e954b235f6acc.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-6f6ffb5395b17c6e.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../solana_ledger/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../solana_ledger/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module shred</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">solana_ledger</a>::<wbr><a class="mod" href="#">shred</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/solana_ledger/shred.rs.html#1-1708">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The <code>shred</code> module defines data structures and methods to pull MTU sized data frames from the
network. There are two types of shreds: data and coding. Data shreds contain entry information
while coding shreds provide redundancy to protect against dropped network packets (erasures).</p>
<p>+———————————————————————————————+
| Data Shred                                                                                  |
+———————————————————————————————+
| common       | data       | payload                                                         |
| header       | header     |                                                                 |
|+—+—+—  |+—+—+—|+–––––––––––––––––––––––––––––+––+|
|| s | s | .   || p | f | s || data (ie ledger entries)                                 | r  ||
|| i | h | .   || a | l | i ||                                                          | e  ||
|| g | r | .   || r | a | z || See notes immediately after shred diagrams for an        | s  ||
|| n | e |     || e | g | e || explanation of the “restricted” section in this payload  | t  ||
|| a | d |     || n | s |   ||                                                          | r  ||
|| t |   |     || t |   |   ||                                                          | i  ||
|| u | t |     ||   |   |   ||                                                          | c  ||
|| r | y |     || o |   |   ||                                                          | t  ||
|| e | p |     || f |   |   ||                                                          | e  ||
||   | e |     || f |   |   ||                                                          | d  ||
|+—+—+—  |+—+—+—+|–––––––––––––––––––––––––––––+––+|
+———————————————————————————————+</p>
<p>+———————————————————————————————+
| Coding Shred                                                                                |
+———————————————————————————————+
| common       | coding     | payload                                                         |
| header       | header     |                                                                 |
|+—+—+—  |+—+—+—+––––––––––––––––––––––––––––––––+|
|| s | s | .   || n | n | p || data (encoded data shred data)                                ||
|| i | h | .   || u | u | o ||                                                               ||
|| g | r | .   || m | m | s ||                                                               ||
|| n | e |     ||   |   | i ||                                                               ||
|| a | d |     || d | c | t ||                                                               ||
|| t |   |     ||   |   | i ||                                                               ||
|| u | t |     || s | s | o ||                                                               ||
|| r | y |     || h | h | n ||                                                               ||
|| e | p |     || r | r |   ||                                                               ||
||   | e |     || e | e |   ||                                                               ||
||   |   |     || d | d |   ||                                                               ||
|+—+—+—  |+—+—+—+|+–––––––––––––––––––––––––––––––+|
+———————————————————————————————+</p>
<p>Notes:
a) Coding shreds encode entire data shreds: both of the headers AND the payload.
b) Coding shreds require their own headers for identification and etc.
c) The erasure algorithm requires data shred and coding shred bytestreams to be equal in length.</p>
<p>So, given a) - c), we must restrict data shred’s payload length such that the entire coding
payload can fit into one coding shred / packet.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="common/index.html" title="mod solana_ledger::shred::common">common</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="layout/index.html" title="mod solana_ledger::shred::layout">layout</a></div></li><li><div class="item-name"><a class="mod" href="legacy/index.html" title="mod solana_ledger::shred::legacy">legacy</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="merkle/index.html" title="mod solana_ledger::shred::merkle">merkle</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="shred_code/index.html" title="mod solana_ledger::shred::shred_code">shred_code</a></div></li><li><div class="item-name"><a class="mod" href="shred_data/index.html" title="mod solana_ledger::shred::shred_data">shred_data</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="stats/index.html" title="mod solana_ledger::shred::stats">stats</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="mod" href="traits/index.html" title="mod solana_ledger::shred::traits">traits</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.dispatch.html" title="macro solana_ledger::shred::dispatch">dispatch</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CodingShredHeader.html" title="struct solana_ledger::shred::CodingShredHeader">CodingShredHeader</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">The coding shred header has FEC information</div></li><li><div class="item-name"><a class="struct" href="struct.DataShredHeader.html" title="struct solana_ledger::shred::DataShredHeader">DataShredHeader</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">The data shred header has parent offset and flags</div></li><li><div class="item-name"><a class="struct" href="struct.ErasureSetId.html" title="struct solana_ledger::shred::ErasureSetId">ErasureSetId</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">Tuple which identifies erasure coding set that the shred belongs to.</div></li><li><div class="item-name"><a class="struct" href="struct.ProcessShredsStats.html" title="struct solana_ledger::shred::ProcessShredsStats">ProcessShredsStats</a></div></li><li><div class="item-name"><a class="struct" href="struct.ReedSolomonCache.html" title="struct solana_ledger::shred::ReedSolomonCache">ReedSolomonCache</a></div></li><li><div class="item-name"><a class="struct" href="struct.ShredCommonHeader.html" title="struct solana_ledger::shred::ShredCommonHeader">ShredCommonHeader</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A common header that is present in data and code shred headers</div></li><li><div class="item-name"><a class="struct" href="struct.ShredFetchStats.html" title="struct solana_ledger::shred::ShredFetchStats">ShredFetchStats</a></div></li><li><div class="item-name"><a class="struct" href="struct.ShredFlags.html" title="struct solana_ledger::shred::ShredFlags">ShredFlags</a></div></li><li><div class="item-name"><a class="struct" href="struct.ShredId.html" title="struct solana_ledger::shred::ShredId">ShredId</a></div><div class="desc docblock-short">Tuple which uniquely identifies a shred should it exists.</div></li><li><div class="item-name"><a class="struct" href="struct.Shredder.html" title="struct solana_ledger::shred::Shredder">Shredder</a></div></li><li><div class="item-name"><a class="struct" href="struct.__FieldVisitor.html" title="struct solana_ledger::shred::__FieldVisitor">__FieldVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__FieldVisitor.html" title="struct solana_ledger::shred::__FieldVisitor">__FieldVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__FieldVisitor.html" title="struct solana_ledger::shred::__FieldVisitor">__FieldVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__FieldVisitor.html" title="struct solana_ledger::shred::__FieldVisitor">__FieldVisitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__Visitor.html" title="struct solana_ledger::shred::__Visitor">__Visitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__Visitor.html" title="struct solana_ledger::shred::__Visitor">__Visitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__Visitor.html" title="struct solana_ledger::shred::__Visitor">__Visitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__Visitor.html" title="struct solana_ledger::shred::__Visitor">__Visitor</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum solana_ledger::shred::Error">Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.Shred.html" title="enum solana_ledger::shred::Shred">Shred</a></div></li><li><div class="item-name"><a class="enum" href="enum.ShredData.html" title="enum solana_ledger::shred::ShredData">ShredData</a></div></li><li><div class="item-name"><a class="enum" href="enum.ShredType.html" title="enum solana_ledger::shred::ShredType">ShredType</a></div></li><li><div class="item-name"><a class="enum" href="enum.ShredVariant.html" title="enum solana_ledger::shred::ShredVariant">ShredVariant</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.SignedData.html" title="enum solana_ledger::shred::SignedData">SignedData</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.__Field.html" title="enum solana_ledger::shred::__Field">__Field</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.__Field.html" title="enum solana_ledger::shred::__Field">__Field</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.__Field.html" title="enum solana_ledger::shred::__Field">__Field</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="enum" href="enum.__Field.html" title="enum solana_ledger::shred::__Field">__Field</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.Code__num_enum_0__.html" title="constant solana_ledger::shred::Code__num_enum_0__">Code__num_enum_0__</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.DATA_SHREDS_PER_FEC_BLOCK.html" title="constant solana_ledger::shred::DATA_SHREDS_PER_FEC_BLOCK">DATA_SHREDS_PER_FEC_BLOCK</a></div></li><li><div class="item-name"><a class="constant" href="constant.Data__num_enum_0__.html" title="constant solana_ledger::shred::Data__num_enum_0__">Data__num_enum_0__</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.FIELDS.html" title="constant solana_ledger::shred::FIELDS">FIELDS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.FIELDS.html" title="constant solana_ledger::shred::FIELDS">FIELDS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.FIELDS.html" title="constant solana_ledger::shred::FIELDS">FIELDS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.FIELDS.html" title="constant solana_ledger::shred::FIELDS">FIELDS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.LEGACY_SHRED_DATA_CAPACITY.html" title="constant solana_ledger::shred::LEGACY_SHRED_DATA_CAPACITY">LEGACY_SHRED_DATA_CAPACITY</a></div></li><li><div class="item-name"><a class="constant" href="constant.OFFSET_OF_SHRED_INDEX.html" title="constant solana_ledger::shred::OFFSET_OF_SHRED_INDEX">OFFSET_OF_SHRED_INDEX</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.OFFSET_OF_SHRED_SLOT.html" title="constant solana_ledger::shred::OFFSET_OF_SHRED_SLOT">OFFSET_OF_SHRED_SLOT</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.OFFSET_OF_SHRED_VARIANT.html" title="constant solana_ledger::shred::OFFSET_OF_SHRED_VARIANT">OFFSET_OF_SHRED_VARIANT</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_CODING_SHRED_HEADERS.html" title="constant solana_ledger::shred::SIZE_OF_CODING_SHRED_HEADERS">SIZE_OF_CODING_SHRED_HEADERS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_COMMON_SHRED_HEADER.html" title="constant solana_ledger::shred::SIZE_OF_COMMON_SHRED_HEADER">SIZE_OF_COMMON_SHRED_HEADER</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">The following constants are computed by hand, and hardcoded.
<code>test_shred_constants</code> ensures that the values are correct.
Constants are used over lazy_static for performance reasons.</div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_DATA_SHRED_HEADERS.html" title="constant solana_ledger::shred::SIZE_OF_DATA_SHRED_HEADERS">SIZE_OF_DATA_SHRED_HEADERS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_NONCE.html" title="constant solana_ledger::shred::SIZE_OF_NONCE">SIZE_OF_NONCE</a></div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_SHRED_SLOT.html" title="constant solana_ledger::shred::SIZE_OF_SHRED_SLOT">SIZE_OF_SHRED_SLOT</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_SHRED_VARIANT.html" title="constant solana_ledger::shred::SIZE_OF_SHRED_VARIANT">SIZE_OF_SHRED_VARIANT</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.SIZE_OF_SIGNATURE.html" title="constant solana_ledger::shred::SIZE_OF_SIGNATURE">SIZE_OF_SIGNATURE</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.__BitFlags.html" title="trait solana_ledger::shred::__BitFlags">__BitFlags</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="trait" href="trait.__BitFlags.html" title="trait solana_ledger::shred::__BitFlags">__BitFlags</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.make_merkle_shreds_from_entries.html" title="fn solana_ledger::shred::make_merkle_shreds_from_entries">make_merkle_shreds_from_entries</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.max_entries_per_n_shred.html" title="fn solana_ledger::shred::max_entries_per_n_shred">max_entries_per_n_shred</a></div></li><li><div class="item-name"><a class="fn" href="fn.max_ticks_per_n_shreds.html" title="fn solana_ledger::shred::max_ticks_per_n_shreds">max_ticks_per_n_shreds</a></div></li><li><div class="item-name"><a class="fn" href="fn.recover.html" title="fn solana_ledger::shred::recover">recover</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.should_discard_shred.html" title="fn solana_ledger::shred::should_discard_shred">should_discard_shred</a></div></li><li><div class="item-name"><a class="fn" href="fn.verify_test_data_shred.html" title="fn solana_ledger::shred::verify_test_data_shred">verify_test_data_shred</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Nonce.html" title="type solana_ledger::shred::Nonce">Nonce</a></div></li></ul></section></div></main></body></html>