<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Atomically-committed sequences of instructions."><title>solana_sdk::transaction - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="solana_sdk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (1a6ae3d69 2023-04-27)" data-search-js="search-618e954b235f6acc.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-6f6ffb5395b17c6e.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../solana_sdk/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../solana_sdk/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module transaction</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">solana_sdk</a>::<wbr><a class="mod" href="#">transaction</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/solana_sdk/transaction/mod.rs.html#1-1689">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Atomically-committed sequences of instructions.</p>
<p>While <a href="../instruction/struct.Instruction.html" title="struct solana_sdk::instruction::Instruction"><code>Instruction</code></a>s are the basic unit of computation in Solana, they are
submitted by clients in <a href="struct.Transaction.html" title="struct solana_sdk::transaction::Transaction"><code>Transaction</code></a>s containing one or more
instructions, and signed by one or more <a href="../signer/trait.Signer.html" title="trait solana_sdk::signer::Signer"><code>Signer</code></a>s. Solana executes the
instructions in a transaction in order, and only commits any changes if all
instructions terminate without producing an error or exception.</p>
<p>Transactions do not directly contain their instructions but instead include
a <a href="../message/struct.Message.html" title="struct solana_sdk::message::Message"><code>Message</code></a>, a precompiled representation of a sequence of instructions.
<code>Message</code>â€™s constructors handle the complex task of reordering the
individual lists of accounts required by each instruction into a single flat
list of deduplicated accounts required by the Solana runtime. The
<code>Transaction</code> type has constructors that build the <code>Message</code> so that clients
donâ€™t need to interact with them directly.</p>
<p>Prior to submission to the network, transactions must be signed by one or or
more keypairs, and this signing is typically performed by an abstract
<a href="../signer/trait.Signer.html" title="trait solana_sdk::signer::Signer"><code>Signer</code></a>, which may be a <a href="../signer/keypair/struct.Keypair.html" title="struct solana_sdk::signer::keypair::Keypair"><code>Keypair</code></a> but may also be other types of
signers including remote wallets, such as Ledger devices, as represented by
the <a href="https://docs.rs/solana-remote-wallet/latest/solana_remote_wallet/remote_keypair/struct.RemoteKeypair.html"><code>RemoteKeypair</code></a> type in the <a href="https://docs.rs/solana-remote-wallet/latest/"><code>solana-remote-wallet</code></a> crate.</p>
<p>Every transaction must be signed by a fee-paying account, the account from
which the cost of executing the transaction is withdrawn. Other required
signatures are determined by the requirements of the programs being executed
by each instruction, and are conventionally specified by that programâ€™s
documentation.</p>
<p>When signing a transaction, a recent blockhash must be provided (which can
be retrieved with <a href="https://docs.rs/solana-rpc-client/latest/solana_rpc_client/rpc_client/struct.RpcClient.html#method.get_latest_blockhash"><code>RpcClient::get_latest_blockhash</code></a>). This allows
validators to drop old but unexecuted transactions; and to distinguish
between accidentally duplicated transactions and intentionally duplicated
transactions â€” any identical transactions will not be executed more
than once, so updating the blockhash between submitting otherwise identical
transactions makes them unique. If a client must sign a transaction long
before submitting it to the network, then it can use the <em><a href="https://docs.solana.com/implemented-proposals/durable-tx-nonces">durable
transaction nonce</a></em> mechanism instead of a recent blockhash to ensure unique
transactions.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<p>This example uses the <a href="https://docs.rs/solana-rpc-client"><code>solana_rpc_client</code></a> and <a href="https://docs.rs/anyhow"><code>anyhow</code></a> crates.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>anyhow::Result;
<span class="kw">use </span>borsh::{BorshSerialize, BorshDeserialize};
<span class="kw">use </span>solana_rpc_client::rpc_client::RpcClient;
<span class="kw">use </span>solana_sdk::{
     instruction::Instruction,
     message::Message,
     pubkey::Pubkey,
     signature::{Keypair, Signer},
     transaction::Transaction,
};

<span class="comment">// A custom program instruction. This would typically be defined in
// another crate so it can be shared between the on-chain program and
// the client.
</span><span class="attr">#[derive(BorshSerialize, BorshDeserialize)]
</span><span class="kw">enum </span>BankInstruction {
    Initialize,
    Deposit { lamports: u64 },
    Withdraw { lamports: u64 },
}

<span class="kw">fn </span>send_initialize_tx(
    client: <span class="kw-2">&amp;</span>RpcClient,
    program_id: Pubkey,
    payer: <span class="kw-2">&amp;</span>Keypair
) -&gt; <span class="prelude-ty">Result</span>&lt;()&gt; {

    <span class="kw">let </span>bank_instruction = BankInstruction::Initialize;

    <span class="kw">let </span>instruction = Instruction::new_with_borsh(
        program_id,
        <span class="kw-2">&amp;</span>bank_instruction,
        <span class="macro">vec!</span>[],
    );

    <span class="kw">let </span>blockhash = client.get_latest_blockhash()<span class="question-mark">?</span>;
    <span class="kw">let </span><span class="kw-2">mut </span>tx = Transaction::new_signed_with_payer(
        <span class="kw-2">&amp;</span>[instruction],
        <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>payer.pubkey()),
        <span class="kw-2">&amp;</span>[payer],
        blockhash,
    );
    client.send_and_confirm_transaction(<span class="kw-2">&amp;</span>tx)<span class="question-mark">?</span>;

    <span class="prelude-val">Ok</span>(())
}</code></pre></div>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="error/index.html" title="mod solana_sdk::transaction::error">error</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="sanitized/index.html" title="mod solana_sdk::transaction::sanitized">sanitized</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="versioned/index.html" title="mod solana_sdk::transaction::versioned">versioned</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Defines a transaction which supports multiple versions of messages.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.SanitizedTransaction.html" title="struct solana_sdk::transaction::SanitizedTransaction">SanitizedTransaction</a></div><div class="desc docblock-short">Sanitized transaction and the hash of its message</div></li><li><div class="item-name"><a class="struct" href="struct.SanitizedVersionedTransaction.html" title="struct solana_sdk::transaction::SanitizedVersionedTransaction">SanitizedVersionedTransaction</a></div><div class="desc docblock-short">Wraps a sanitized <code>VersionedTransaction</code> to provide a safe API</div></li><li><div class="item-name"><a class="struct" href="struct.Transaction.html" title="struct solana_sdk::transaction::Transaction">Transaction</a></div><div class="desc docblock-short">An atomically-commited sequence of instructions.</div></li><li><div class="item-name"><a class="struct" href="struct.TransactionAccountLocks.html" title="struct solana_sdk::transaction::TransactionAccountLocks">TransactionAccountLocks</a></div><div class="desc docblock-short">Set of accounts that must be locked for safe transaction processing</div></li><li><div class="item-name"><a class="struct" href="struct.VersionedTransaction.html" title="struct solana_sdk::transaction::VersionedTransaction">VersionedTransaction</a></div><div class="desc docblock-short">An atomic transaction</div></li><li><div class="item-name"><a class="struct" href="struct.__DeserializeWith.html" title="struct solana_sdk::transaction::__DeserializeWith">__DeserializeWith</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__DeserializeWith.html" title="struct solana_sdk::transaction::__DeserializeWith">__DeserializeWith</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__FieldVisitor.html" title="struct solana_sdk::transaction::__FieldVisitor">__FieldVisitor</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__SerializeWith.html" title="struct solana_sdk::transaction::__SerializeWith">__SerializeWith</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="struct" href="struct.__Visitor.html" title="struct solana_sdk::transaction::__Visitor">__Visitor</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Legacy.html" title="enum solana_sdk::transaction::Legacy">Legacy</a></div><div class="desc docblock-short">Type that serializes to the string â€œlegacyâ€</div></li><li><div class="item-name"><a class="enum" href="enum.MessageHash.html" title="enum solana_sdk::transaction::MessageHash">MessageHash</a></div><div class="desc docblock-short">Type that represents whether the transaction message has been precomputed or
not.</div></li><li><div class="item-name"><a class="enum" href="enum.SimpleAddressLoader.html" title="enum solana_sdk::transaction::SimpleAddressLoader">SimpleAddressLoader</a></div></li><li><div class="item-name"><a class="enum" href="enum.TransactionError.html" title="enum solana_sdk::transaction::TransactionError">TransactionError</a></div><div class="desc docblock-short">Reasons a transaction might be rejected.</div></li><li><div class="item-name"><a class="enum" href="enum.TransactionVerificationMode.html" title="enum solana_sdk::transaction::TransactionVerificationMode">TransactionVerificationMode</a></div></li><li><div class="item-name"><a class="enum" href="enum.TransactionVersion.html" title="enum solana_sdk::transaction::TransactionVersion">TransactionVersion</a></div></li><li><div class="item-name"><a class="enum" href="enum.__Field.html" title="enum solana_sdk::transaction::__Field">__Field</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.FIELDS.html" title="constant solana_sdk::transaction::FIELDS">FIELDS</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.MAX_TX_ACCOUNT_LOCKS.html" title="constant solana_sdk::transaction::MAX_TX_ACCOUNT_LOCKS">MAX_TX_ACCOUNT_LOCKS</a></div><div class="desc docblock-short">Maximum number of accounts that a transaction may lock.
128 was chosen because it is the minimum number of accounts
needed for the Neon EVM implementation.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.AddressLoader.html" title="trait solana_sdk::transaction::AddressLoader">AddressLoader</a></div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.__wbg_transaction_new.html" title="fn solana_sdk::transaction::__wbg_transaction_new">__wbg_transaction_new</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> <sup title="unsafe function">âš </sup></div></li><li><div class="item-name"><a class="fn" href="fn.get_nonce_pubkey_from_instruction.html" title="fn solana_sdk::transaction::get_nonce_pubkey_from_instruction">get_nonce_pubkey_from_instruction</a><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="fn" href="fn.uses_durable_nonce.html" title="fn solana_sdk::transaction::uses_durable_nonce">uses_durable_nonce</a></div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type solana_sdk::transaction::Result">Result</a></div></li></ul></section></div></main></body></html>